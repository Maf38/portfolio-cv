<div id="cv-content" class="cv-display">
  <!-- Header / Profile Section -->
  <header class="cv-header">
    <h1 class="cv-name">{{ cvData.profile.fullName }}</h1>
    <p class="cv-title">{{ cvData.profile.title }}</p>
    <p class="cv-subtitle">{{ cvData.profile.subtitle }}</p>

    <div class="cv-contact">
      <div class="contact-item">
        <span class="contact-icon">üìß</span>
        <a [href]="'mailto:' + cvData.profile.email" class="contact-link">{{
          cvData.profile.email
        }}</a>
      </div>
      <div class="contact-item">
        <span class="contact-icon">üì±</span>
        <span class="contact-text">{{ cvData.profile.phone }}</span>
      </div>
      <div class="contact-item">
        <span class="contact-icon">üìç</span>
        <span class="contact-text"
          >{{ cvData.profile.location.city }}, {{ cvData.profile.location.country }}</span
        >
      </div>
      <div class="contact-item">
        <span class="contact-icon">üîó</span>
        <a
          [href]="cvData.profile.social.linkedin"
          target="_blank"
          rel="noopener"
          class="contact-link"
          >LinkedIn</a
        >
      </div>
      <div class="contact-item">
        <span class="contact-icon">üíª</span>
        <a [href]="cvData.profile.social.github" target="_blank" rel="noopener" class="contact-link"
          >GitHub</a
        >
      </div>
    </div>

    <p class="cv-summary">{{ cvData.profile.summary }}</p>
  </header>

  <!-- Experience Section -->
  <section class="cv-section">
    <h2 class="section-title">{{ getLabel('experience') }}</h2>
    <div class="experience-list">
      @for (exp of cvData.experience; track exp.id) {
        <div class="experience-item">
          <div class="experience-header">
            <div class="experience-title-group">
              <h3 class="experience-position">{{ exp.position }}</h3>
              <div class="experience-company">
                @if (exp.companyUrl) {
                  <a [href]="exp.companyUrl" target="_blank" rel="noopener" class="company-link">
                    {{ exp.company }}
                  </a>
                } @else {
                  <span>{{ exp.company }}</span>
                }
                @if (exp.via) {
                  <span class="via-text">via {{ exp.via }}</span>
                }
              </div>
            </div>
            <div class="experience-meta">
              <span class="experience-date">{{ formatDateRange(exp.startDate, exp.endDate) }}</span>
              <span class="experience-location">{{ exp.location }}</span>
            </div>
          </div>

          <p class="experience-description">{{ exp.description }}</p>

          @if (exp.achievements && exp.achievements.length > 0) {
            <div class="experience-achievements">
              <h4 class="achievements-title">
                {{ language === 'fr' ? 'R√©alisations' : 'Achievements' }}
              </h4>
              <ul class="achievements-list">
                @for (achievement of exp.achievements; track $index) {
                  <li>{{ achievement }}</li>
                }
              </ul>
            </div>
          }
          @if (exp.technologies && exp.technologies.length > 0) {
            <div class="experience-technologies">
              @for (tech of exp.technologies; track $index) {
                <span class="tech-tag">{{ tech }}</span>
              }
            </div>
          }
        </div>
      }
    </div>
  </section>

  <!-- Education Section -->
  <section class="cv-section">
    <h2 class="section-title">{{ getLabel('education') }}</h2>
    <div class="education-list">
      @for (edu of cvData.education; track edu.id) {
        <div class="education-item">
          <div class="education-header">
            <div class="education-title-group">
              <h3 class="education-degree">{{ edu.degree }}</h3>
              <p class="education-school">{{ edu.school }}</p>
            </div>
            <div class="education-meta">
              <span class="education-date">{{ formatDateRange(edu.startDate, edu.endDate) }}</span>
              <span class="education-location">{{ edu.location }}</span>
            </div>
          </div>
          <p class="education-description">{{ edu.description }}</p>
          @if (edu.courses && edu.courses.length > 0) {
            <ul class="courses-list">
              @for (course of edu.courses; track $index) {
                <li>{{ course }}</li>
              }
            </ul>
          }
        </div>
      }
    </div>
  </section>

  <!-- Skills Section -->
  <section class="cv-section">
    <h2 class="section-title">{{ getLabel('skills') }}</h2>
    <div class="skills-grid">
      @for (category of getSkillCategories(); track category) {
        <div class="skill-category">
          <h3 class="skill-category-title">
            {{ formatCategoryName(category) }}
          </h3>
          <div class="skills-list">
            @for (skill of getSkillsForCategory(category); track skill.name) {
              <div class="skill-item">
                <span class="skill-name">{{ skill.name }}</span>
                <span class="skill-level">{{ skill.level }}</span>
                @if (skill.years > 0) {
                  <span class="skill-years"
                    >{{ skill.years }} {{ language === 'fr' ? 'ans' : 'years' }}</span
                  >
                }
              </div>
            }
          </div>
        </div>
      }
    </div>
  </section>

  <!-- Languages Section -->
  <section class="cv-section cv-section-small">
    <h2 class="section-title">{{ getLabel('languages') }}</h2>
    <div class="languages-list">
      @for (lang of cvData.profile.languages; track lang.code) {
        <div class="language-item">
          <span class="language-name">{{ lang.name }}</span>
          <span class="language-level">{{ lang.level }}</span>
        </div>
      }
    </div>
  </section>

  <!-- Footer -->
  <footer class="cv-footer">
    <p class="cv-footer-text">
      {{ language === 'fr' ? 'Derni√®re mise √† jour' : 'Last updated' }}:
      {{ cvData.meta.lastUpdated }} ¬∑ Version {{ cvData.meta.version }}
    </p>
  </footer>
</div>
